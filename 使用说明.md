# 🚗 车牌识别系统使用说明

## 📋 系统概述

本系统是一个基于深度学习的中国车牌识别解决方案，提供了完整的Web界面、API服务和实时视频处理功能。

## 🛠️ 系统组件

### 核心文件
- **plate_recognition_api.py** - 主API服务
- **static/index.html** - Web可视化界面
- **video_processor.py** - 视频处理模块
- **start_server.py** - 系统启动脚本
- **test_system.py** - 系统测试脚本
- **best_fast_high_accuracy_model.pth** - 训练好的模型文件

### 功能特性
- ✅ 单张图片识别
- ✅ 批量图片处理
- ✅ 实时摄像头识别
- ✅ 视频文件处理
- ✅ RESTful API接口
- ✅ 响应式Web界面
- ✅ 识别结果可视化

## 🚀 快速开始

### 1. 环境准备

确保Python 3.7+已安装，然后运行：

```bash
# 安装依赖
python install_deps.py

# 测试系统
python test_system.py
```

### 2. 启动系统

```bash
# 方式1：使用启动脚本（推荐）
python start_server.py

# 方式2：直接运行API服务
python working_api.py
```

### 3. 访问系统

- **主页**: http://localhost:8001
- **Web界面**: http://localhost:8001/web
- **API文档**: http://localhost:8001/docs

## 📱 使用方法

### Web界面操作

1. **单张图片识别**
   - 点击"选择图片"按钮
   - 选择包含车牌的图片
   - 系统自动识别并显示结果

2. **批量识别**
   - 点击"批量识别"按钮
   - 选择多张图片
   - 系统逐个处理并显示结果

3. **实时摄像头识别**
   - 点击"开始实时识别"按钮
   - 允许浏览器访问摄像头
   - 系统实时识别摄像头中的车牌

### API接口使用

#### 单张图片识别
```bash
curl -X POST "http://localhost:8000/recognize" \
     -H "Content-Type: multipart/form-data" \
     -F "file=@test_image.jpg"
```

#### 批量识别
```bash
curl -X POST "http://localhost:8000/recognize_batch" \
     -H "Content-Type: multipart/form-data" \
     -F "files=@image1.jpg" \
     -F "files=@image2.jpg"
```

#### 获取系统状态
```bash
curl -X GET "http://localhost:8000/health"
```

### 视频处理

#### 摄像头实时识别
```bash
python video_demo.py
# 选择选项1，输入摄像头ID
```

#### 视频文件处理
```bash
python video_demo.py
# 选择选项2，输入视频文件路径
```

## 🔧 高级功能

### 自定义配置

可以修改以下文件来调整系统行为：

1. **plate_recognition_api.py**
   - 修改模型参数
   - 调整图像预处理
   - 更新车牌字符映射

2. **static/index.html**
   - 修改界面样式
   - 添加新功能
   - 调整识别参数

### 性能优化

1. **GPU加速**
   - 确保CUDA已安装
   - 系统自动检测并使用GPU

2. **批处理优化**
   - 使用批量接口提高效率
   - 调整批处理大小

3. **缓存优化**
   - 浏览器自动缓存识别结果
   - 减少重复处理

## 📊 识别结果说明

### 输出格式
```json
{
  "plate_number": "京A12345",
  "plate_type": "蓝牌",
  "confidence": 0.95,
  "processing_time": 0.05
}
```

### 字段说明
- **plate_number**: 识别出的车牌号码
- **plate_type**: 车牌类型（蓝牌、黄牌、绿牌等）
- **confidence**: 识别置信度（0-1）
- **processing_time**: 处理时间（秒）

### 支持的车牌类型
- 蓝牌（普通小型汽车）
- 黄牌（大型车辆）
- 绿牌（新能源）
- 白牌（军车、警车）
- 黑牌（外籍车辆）
- 其他特殊车牌

## 🚨 故障排除

### 常见问题

1. **模型加载失败**
   - 检查`best_fast_high_accuracy_model.pth`文件是否存在
   - 确认文件路径正确

2. **摄像头无法访问**
   - 检查摄像头权限
   - 确认摄像头未被其他程序占用
   - 尝试不同的摄像头ID

3. **Web界面无法访问**
   - 确认服务器已启动
   - 检查防火墙设置
   - 尝试使用不同的浏览器

4. **识别准确率低**
   - 确保图片清晰度足够
   - 检查车牌是否完整可见
   - 调整图片角度和光照

### 日志查看

系统运行时会在控制台输出日志信息，包括：
- 模型加载状态
- 请求处理情况
- 错误信息

### 性能监控

Web界面提供实时统计信息：
- 今日处理数量
- 平均置信度
- 平均处理时间
- 识别成功率

## 🔍 技术细节

### 模型架构
- **骨干网络**: ResNet34
- **特征提取**: 多尺度卷积
- **分类器**: 全连接层
- **输出**: 字符序列 + 车牌类型

### 图像预处理
- 尺寸调整：96x384
- 归一化：ImageNet标准
- 颜色空间：RGB

### 性能指标
- 单张图片处理时间：<100ms
- 批量处理速度：>20 FPS
- 准确率：>90%

## 📝 更新日志

### v1.0 (当前版本)
- ✅ 完整的Web界面
- ✅ RESTful API服务
- ✅ 实时视频处理
- ✅ 批量识别功能
- ✅ 响应式设计
- ✅ 识别结果可视化

## 🤝 技术支持

如需帮助或反馈问题，请：
1. 查看本文档的故障排除部分
2. 运行系统测试脚本检查环境
3. 检查控制台输出的错误信息

---

**⭐ 祝您使用愉快！**